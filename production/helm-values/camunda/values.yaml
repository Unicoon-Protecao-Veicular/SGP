# Values for Camunda Platform 8 (Chart Version 12.5.0)
# Optimized for a single-node k3s cluster.

global:
  image:
    pullPolicy: IfNotPresent
  ingress:
    enabled: false
  # Using longhorn as the default storage class as configured in the original file
  storageClass: longhorn
  multitenancy:
    enabled: false

# Zeebe is the workflow engine.
# For a single node, we ensure replicas, cluster size, and replication factor are all 1.
zeebe:
  enabled: true
  # Correct key for replicas in this chart version
  replicas: 1
  clusterSize: 1
  partitionCount: 1
  replicationFactor: 1
  # Pod resource requests and limits from your original file
  affinity:
    podAntiAffinity: null
  resources:
    requests:
      cpu: "2000m"
      memory: "8Gi"
    limits:
      cpu: "8000m"
      memory: "12Gi"
  # Environment variables from your original file
  env:
    - name: ZEEBE_BROKER_THREADS_CPU_THREAD_COUNT
      value: "6"
    - name: ZEEBE_BROKER_THREADS_IO_THREAD_COUNT
      value: "2"
  # Persistence settings
  persistence:
    enabled: true
    size: 32Gi



zeebe-gateway:
  enabled: true
  replicas: 1
  resources:
    requests:
      cpu: "500m"
      memory: "512Mi"
    limits:
      cpu: "1500m"
      memory: "1Gi"
  service:
    type: LoadBalancer
  affinity:
    podAntiAffinity: null
  podLabels: {}

# Operate is the monitoring tool.
operate:
  enabled: true
  replicas: 1
  resources:
    requests:
      cpu: "500m"
      memory: "1Gi"
    limits:
      cpu: "1000m"
      memory: "2Gi"

# Tasklist is the user task application.
tasklist:
  enabled: true
  replicas: 1
  resources:
    requests:
      cpu: "500m"
      memory: "1Gi"
    limits:
      cpu: "1000m"
      memory: "2Gi"

# Optimize is the process analysis tool.
optimize:
  enabled: true
  replicas: 1
  resources:
    requests:
      cpu: "500m"
      memory: "1Gi"
    limits:
      cpu: "1000m"
      memory: "2Gi"

# Connectors is the integration component.
connectors:
  enabled: true
  replicas: 1
  resources:
    requests:
      cpu: "250m"
      memory: "512Mi"
    limits:
      cpu: "500m"
      memory: "1Gi"

# Identity is the authentication service.
identity:
  enabled: true
  replicas: 1
  resources:
    requests:
      cpu: "250m"
      memory: "512Mi"
    limits:
      cpu: "1000m"
      memory: "1Gi"

  # Keycloak is used by Identity.
  keycloak:
    enabled: true
    replicas: 1
    resources:
      requests:
        cpu: "500m"
        memory: "1Gi"
      limits:
        cpu: "1500m"
        memory: "2Gi"
    # PostgreSQL for Keycloak
    postgresql:
      enabled: true
      primary:
        persistence:
          enabled: true
          size: 20Gi

# Elasticsearch is the data store.
elasticsearch:
  enabled: true
  master:
    replicaCount: 1
    persistence:
      enabled: true
      size: 20Gi
    resources:
      requests:
        cpu: "500m"
        memory: "2Gi"
      limits:
        cpu: "2"
        memory: "4Gi"
  data:
    replicaCount: 1
    persistence:
      enabled: true
      size: 20Gi
    resources:
      requests:
        cpu: "500m"
        memory: "2Gi"
      limits:
        cpu: "2"
        memory: "4Gi"
  ingest:
    replicaCount: 1
    resources:
      requests:
        cpu: "250m"
        memory: "1Gi"
      limits:
        cpu: "1"
        memory: "2Gi"